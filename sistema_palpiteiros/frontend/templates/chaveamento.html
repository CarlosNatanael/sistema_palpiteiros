{% extends "base.html" %}

{% block title %}Chaveamento{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chaveamento.css') }}">
{% endblock %}

{% block content %}
        <div class="container-fluid py-4">
            <div class="text-center mb-4 animate__animated animate__fadeIn">
                <h1 class="display-4 fw-bold text-success">CHAVEAMENTO DO MATA-MATA</h1>
                <p class="lead text-muted">Acompanhe o caminho até a glória!</p>
            </div>
            
            <div class="bracket-container">
                <div class="bracket">
                    <div class="round oitavas">
                        <div class="round-header"><i class="bi bi-trophy-fill me-2"></i>Oitavas</div>
                        {% for confronto in oitavas %}
                            {% include 'partials/_confronto.html' %}
                        {% endfor %}
                    </div>

                    <div class="round quartas">
                        <div class="round-header"><i class="bi bi-trophy-fill me-2"></i>Quartas</div>
                        {% for confronto in quartas %}
                            {% include 'partials/_confronto.html' %}
                        {% endfor %}
                    </div>

                    <div class="round semis">
                        <div class="round-header"><i class="bi bi-trophy-fill me-2"></i>Semifinal</div>
                        {% for confronto in semis %}
                            {% include 'partials/_confronto.html' %}
                        {% endfor %}
                    </div>

                    <div class="round final">
                        <div class="round-header"><i class="bi bi-trophy-fill me-2"></i>Final</div>
                        {% for confronto in final %}
                            {% include 'partials/_confronto.html' %}
                        {% endfor %}
                    </div>

                    <div class="round champion">
                        <div class="round-header"><i class="bi bi-trophy-fill me-2"></i>Campeão</div>
                        <div class="matchup">
                            <div class="team winner champion-box">
                                <i class="bi bi-trophy-fill champion-trophy"></i>
                                <img src="{{ campeao.img }}" class="team-logo" alt="{{ campeao.nome }}">
                                <span class="team-name">{{ campeao.nome }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% set todos_os_confrontos = oitavas + quartas + semis + final %}
        {% for confronto in todos_os_confrontos %}
            {% for jogo in [confronto.ida, confronto.volta] if jogo %}
            <div class="modal fade" id="modal-{{ jogo.id }}" tabindex="-1">
                <div class="modal-dialog modal-lg modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Palpites: {{ jogo.time1_nome }} vs {{ jogo.time2_nome }}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                           {% include 'partials/_modal_content.html' %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% endfor %}
{% endblock %}